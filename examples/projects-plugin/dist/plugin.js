var $=({context:h})=>{let{useState:l,useEffect:N}=React,{theme:f,apiClient:w,metadata:n,utils:c}=h,g=f?.mode||"light",t=g==="dark",[p,k]=l([]),[s,x]=l(!0),[d,b]=l(null),[r,P]=l(""),[i,y]=l("grid"),m=async()=>{x(!0),b(null);try{console.log("[Projects Plugin] Fetching projects from backend...");let e=await w.get("/api/v1/projects");console.log("[Projects Plugin] Received projects:",e),k(e),c.toast(`Loaded ${e.length} projects`,"success")}catch(e){let a=e instanceof Error?e.message:"Failed to load projects";b(a),c.toast(a,"error"),console.error("[Projects Plugin] Error:",e)}finally{x(!1)}};N(()=>{m()},[]);let o=p.filter(e=>e.title.toLowerCase().includes(r.toLowerCase())||e.name.toLowerCase().includes(r.toLowerCase())||e.description.toLowerCase().includes(r.toLowerCase())),u=e=>e.split(",").map(a=>a.trim());return React.createElement("div",{className:`min-h-screen p-6 ${t?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`},React.createElement("div",{className:"max-w-7xl mx-auto"},React.createElement("div",{className:"mb-8"},React.createElement("h1",{className:"text-4xl font-bold mb-2"},"\u{1F4C1} ",n.title||n.name),React.createElement("p",{className:"text-lg opacity-75"},"Browse and explore available projects"),React.createElement("p",{className:"text-sm opacity-50 mt-1"},"Version ",n.version," \u2022 Current theme: ",g)),React.createElement("div",{className:`p-6 rounded-lg shadow-lg mb-6 ${t?"bg-gray-800":"bg-white"}`},React.createElement("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"},React.createElement("div",{className:"flex-1 w-full sm:max-w-md"},React.createElement("input",{type:"text",placeholder:"Search projects...",value:r,onChange:e=>P(e.target.value),className:`w-full px-4 py-2 rounded border ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`})),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>y("grid"),className:`px-4 py-2 rounded transition-colors ${i==="grid"?"bg-blue-600 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`},"Grid"),React.createElement("button",{onClick:()=>y("list"),className:`px-4 py-2 rounded transition-colors ${i==="list"?"bg-blue-600 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`},"List"),React.createElement("button",{onClick:m,disabled:s,className:`px-4 py-2 rounded transition-colors ${s?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`},s?"Loading...":"Refresh"))),React.createElement("div",{className:"mt-4 flex gap-4 text-sm"},React.createElement("span",{className:"opacity-75"},"Total: ",React.createElement("strong",null,p.length)," projects"),r&&React.createElement("span",{className:"opacity-75"},"Filtered: ",React.createElement("strong",null,o.length)," projects"))),s&&React.createElement("div",{className:"flex items-center justify-center h-64"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),React.createElement("p",null,"Loading projects..."))),d&&!s&&React.createElement("div",{className:"p-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("span",{className:"text-2xl"},"\u26A0\uFE0F"),React.createElement("div",null,React.createElement("h3",{className:"text-red-800 dark:text-red-200 font-semibold mb-1"},"Failed to Load Projects"),React.createElement("p",{className:"text-red-700 dark:text-red-300 text-sm"},d),React.createElement("button",{onClick:m,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm"},"Retry")))),!s&&!d&&o.length===0&&React.createElement("div",{className:`p-12 rounded-lg shadow-lg text-center ${t?"bg-gray-800":"bg-white"}`},React.createElement("div",{className:"text-6xl mb-4"},"\u{1F4C2}"),React.createElement("h3",{className:"text-2xl font-semibold mb-2"},"No Projects Found"),React.createElement("p",{className:"opacity-75"},r?`No projects match "${r}"`:"No projects available")),!s&&!d&&i==="grid"&&o.length>0&&React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},o.map(e=>React.createElement("div",{key:e.id,className:`p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow ${t?"bg-gray-800":"bg-white"}`},React.createElement("div",{className:"mb-4"},React.createElement("div",{className:"flex items-start justify-between mb-2"},React.createElement("h3",{className:"text-xl font-bold"},e.title),e["components-metrics"]&&React.createElement("span",{className:"px-2 py-1 text-xs rounded bg-green-500 text-white"},"Metrics")),React.createElement("p",{className:"text-sm opacity-75 font-mono"},e.name)),React.createElement("p",{className:"text-sm opacity-90 mb-4 line-clamp-3"},e.description),React.createElement("div",{className:"space-y-2 text-xs"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"opacity-75"},"Views:"),React.createElement("div",{className:"flex gap-1 flex-wrap"},u(e.views).map(a=>React.createElement("span",{key:a,className:`px-2 py-1 rounded ${t?"bg-gray-700":"bg-gray-100"}`},a)))),e.alerts&&React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"opacity-75"},"Alerts:"),React.createElement("a",{href:e.alerts,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 hover:underline truncate",onClick:a=>{a.preventDefault(),c.openExternal(e.alerts)}},"View Alerts Config")),React.createElement("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200 dark:border-gray-700"},React.createElement("span",{className:"opacity-75"},"ID:"),React.createElement("code",{className:"text-xs opacity-60 truncate"},e.id)))))),!s&&!d&&i==="list"&&o.length>0&&React.createElement("div",{className:`rounded-lg shadow-lg overflow-hidden ${t?"bg-gray-800":"bg-white"}`},React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"w-full"},React.createElement("thead",{className:`${t?"bg-gray-700":"bg-gray-50"}`},React.createElement("tr",null,React.createElement("th",{className:"text-left py-3 px-4 font-semibold"},"Title"),React.createElement("th",{className:"text-left py-3 px-4 font-semibold"},"Name"),React.createElement("th",{className:"text-left py-3 px-4 font-semibold"},"Description"),React.createElement("th",{className:"text-left py-3 px-4 font-semibold"},"Views"),React.createElement("th",{className:"text-center py-3 px-4 font-semibold"},"Metrics"))),React.createElement("tbody",null,o.map((e,a)=>React.createElement("tr",{key:e.id,className:`border-t ${t?"border-gray-700":"border-gray-200"} hover:bg-opacity-50 ${t?"hover:bg-gray-700":"hover:bg-gray-50"}`},React.createElement("td",{className:"py-3 px-4 font-semibold"},e.title),React.createElement("td",{className:"py-3 px-4"},React.createElement("code",{className:"text-sm"},e.name)),React.createElement("td",{className:"py-3 px-4 text-sm max-w-md truncate"},e.description),React.createElement("td",{className:"py-3 px-4"},React.createElement("div",{className:"flex gap-1 flex-wrap"},u(e.views).map(v=>React.createElement("span",{key:v,className:`px-2 py-1 text-xs rounded ${t?"bg-gray-700":"bg-gray-100"}`},v)))),React.createElement("td",{className:"py-3 px-4 text-center"},e["components-metrics"]?React.createElement("span",{className:"text-green-500"},"\u2713"):React.createElement("span",{className:"opacity-30"},"\u2014"))))))))))},C={component:$,metadata:{name:"projects-plugin",version:"1.0.0",author:"Oleg"},hooks:{onMount(){console.log("[Projects Plugin] mounted")},onUnmount(){console.log("[Projects Plugin] unmounted")}}};export{C as default};
//# sourceMappingURL=plugin.js.map
